% add 'draft' to enable draft option on (see below)
\documentclass[a4paper,11pt,openbib,draft]{memoir}

\input{header/packages}
\input{header/style}
\input{header/commands}
\input{header/acronyms}
\input{header/tikz}

% Draft
\ifdraftdoc
    \usepackage[colorspec=0.9]{draftwatermark}
    \SetWatermarkScale{0.3}
    \SetWatermarkText{\bf Draft: \today}
    \setkeys{Gin}{draft=false}  % Display images in draft mode
\fi

\begin{document}
% Relax constraint on constant page height
\raggedbottom

\frontmatter
\pagenumbering{roman}
%
\input{frontmatter/title}
\clearemptydoublepage

%
\input{frontmatter/abstract}
\clearemptydoublepage
%
\input{frontmatter/dedication}
\clearemptydoublepage
%


%%%%% TABLE OF CONTENTS
\renewcommand{\contentsname}{Table of Contents}
\maxtocdepth{subsection}
\tableofcontents*
\addtocontents{toc}{\par\nobreak \mbox{}\hfill{\bf Page}\par\nobreak}
%\clearemptydoublepage
%

\iffalse
%%%%% LIST OF TABLES
\listoftables
\addtocontents{lot}{\par\nobreak\textbf{{\scshape Table} \hfill Page}\par\nobreak}
\clearemptydoublepage
%%%%% LIST OF FIGURES
\listoffigures
\addtocontents{lof}{\par\nobreak\textbf{{\scshape Figure} \hfill Page}\par\nobreak}
\clearemptydoublepage
\fi
%
%
% The bulk of the document is delegated to these chapter files in
% subdirectories.
\mainmatter
%

%\part{Prelude}

\part{Software development and software mining}

\import{chapters/}{01-introduction.tex}
\import{chapters/}{02-software-heritage.tex}
\import{chapters/}{03-version-control-systems.tex}
\import{chapters/}{04-software-heritage-model.tex}
\import{chapters/}{05-large-scale-mining.tex}

\part{Making the data available}

\import{chapters/}{06-vault.tex}
\import{chapters/}{07-fuse.tex}
% TODO: blob chapter?
\import{chapters/}{08-graph-dataset.tex}

\part{Exploiting software development data as a recursive graph}

\import{chapters/}{09-graph-compression.tex}
\iffalse
\import{chapters/}{10-graph-metadata.tex}
\import{chapters/}{11-subdatasets.tex}
\import{chapters/}{12-graph-querying.tex}

\part{The graph structure of software development}

\import{chapters/}{13-topology.tex}
\import{chapters/}{14-forks.tex}

\part{Applications}

\import{chapters/}{15-derived-data.tex}
\import{chapters/}{16-sharding.tex}

\import{chapters/}{17-conclusion.tex}
\fi

%\part*{Conclusions}
%\addcontentsline{toc}{part}{Conclusions}

% \import{chapters/}{7-conclusion.tex}

%\clearemptydoublepage
%
%
% APPENDIX
\iffalse
\appendix
% \import{chapters/appendices/}{app0A.tex}
\clearemptydoublepage
\fi


%
% Apparently the guidelines don't say anything about citations or
% bibliography styles so I guess we can use anything.
\backmatter
\bibliographystyle{plain}
\refstepcounter{chapter}
\bibliography{thesis}




%% credits for the template
\clearemptydoublepage
\newpage
\thispagestyle{empty}
\vspace*{\fill}
\centering{%
\footnotesize{{\LaTeX{} thesis template adapted from \href{https://www.overleaf.com/latex/templates/university-of-bristol-thesis-template/kzqrfvyxxcdm#.W1h6jeFfiEJ}{V\'ictor F. Bre\~na-Medina's template} (Creative Commons CC BY 4.0)}

\url{https://frama.link/thesis_template}}
}


%\clearemptydoublepage
%
% Add index
%\printindex
%
\end{document}
